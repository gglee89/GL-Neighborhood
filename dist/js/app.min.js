var self=this,MapMarker=function(e,o,a,r){this.marker=e,this.name=o,this.category=a,this.position=r},PlaceItem=function(e){this.web_url=ko.observable(e.web_url),this.snippet=ko.observable(e.snippet),this.name=ko.observable(e.name),this.category=ko.observable(e.category),this.optional=ko.observable(e.optional),this.image=ko.observable(e.image),this.address=ko.observable(e.address)},PlaceViewModel=function(e){self.neighborhood=ko.observable(""),self.locationLat=ko.observable(""),self.locationLng=ko.observable(""),self.placeHeader=ko.observable(""),self.hasAddress=ko.observable(!0),self.hasImage=ko.observable(!0),self.isFilterVisible=ko.observable(!0),self.filter=ko.observable(""),self.recommendedPlaces=ko.observableArray([]),self.placeList=ko.observableArray(self.recommendedPlaces()),self.hoverMarker=function(e){markers.forEach(function(o){o.name===e.name()?o.marker.setIcon(foursquareIcon2):o.marker.setIcon(foursquareIcon1)})},self.clickMarker=function(e){var o=$(window).height();875>o&&($("#menu").toggle("slide"),map.panTo(marker.getPosition())),markers.forEach(function(o){o.marker.setIcon(foursquareIcon1),o.name===e.name()&&(o.marker.setIcon(foursquareIcon2),google.maps.event.trigger(o.marker,"click"),map.panTo(o.position))})},self.filteredList=ko.computed(function(){var e,o=[],a=self.filter().toLowerCase();self.recommendedPlaces().forEach(function(r){e=r,-1!=e.name().toLowerCase().indexOf(a)&&o.push(r)}),self.placeList(o)}),self.displayedMarkers=ko.computed(function(){var e=self.filter().toLowerCase();markers.forEach(function(o){null===o.marker.map&&o.marker.setMap(map),-1===o.name.toLowerCase().indexOf(e)&&-1===o.category.toLowerCase().indexOf(e)&&o.marker.setMap(null)})})};ko.applyBindings(new PlaceViewModel);var setMaxHeight=function(){var e=$(window).height(),o=$(".menu-places-list"),a=$("#search-bar").outerHeight(),r=$(".menu-places-header").outerHeight(),s=e-a-r;console.log("New max height: "+s),o.css({"max-height":s+"px"})},updateBackgroundColor=function(e,o){var a={"background-color":o};$(".menu-search-icon").css("background",""),e.css(a),$(".menu-places").css(a)},stringStartsWith=function(e,o){return e=e||"",o.length>e.length?!1:e.substring(0,o.length)===o};$(function(){setMaxHeight(),$(window).resize(function(){setMaxHeight(),window.setTimeout(function(){map.panTo(marker.getPosition())}),window.addEventListener("resize",function(){map.fitBounds(mapBounds),$("#map").height($(window).height())})}),$("#hamburger-top-menu").click(function(){$("#menu").toggle("slide")})});